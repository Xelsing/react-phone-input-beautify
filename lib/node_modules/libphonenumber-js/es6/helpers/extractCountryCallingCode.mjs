"use client";
import N from "./stripIddPrefix.mjs";
import u from "./extractCountryCallingCodeFromInternationalNumberWithoutPlusSign.mjs";
import M from "../metadata.mjs";
import { MAX_LENGTH_COUNTRY_CODE as I } from "../constants.mjs";
function g(r, o, f, i) {
  if (!r)
    return {};
  var n;
  if (r[0] !== "+") {
    var l = N(r, o, f, i);
    if (l && l !== r)
      n = !0, r = "+" + l;
    else {
      if (o || f) {
        var _ = u(r, o, f, i), s = _.countryCallingCode, C = _.number;
        if (s)
          return {
            countryCallingCodeSource: "FROM_NUMBER_WITHOUT_PLUS_SIGN",
            countryCallingCode: s,
            number: C
          };
      }
      return {
        // No need to set it to `UNSPECIFIED`. It can be just `undefined`.
        // countryCallingCodeSource: 'UNSPECIFIED',
        number: r
      };
    }
  }
  if (r[1] === "0")
    return {};
  i = new M(i);
  for (var e = 2; e - 1 <= I && e <= r.length; ) {
    var t = r.slice(1, e);
    if (i.hasCallingCode(t))
      return i.selectNumberingPlan(t), {
        countryCallingCodeSource: n ? "FROM_NUMBER_WITH_IDD" : "FROM_NUMBER_WITH_PLUS_SIGN",
        countryCallingCode: t,
        number: r.slice(e)
      };
    e++;
  }
  return {};
}
export {
  g as default
};
