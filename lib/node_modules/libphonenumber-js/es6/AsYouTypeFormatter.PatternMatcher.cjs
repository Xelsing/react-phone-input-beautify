"use client";"use strict";const b=require("./AsYouTypeFormatter.PatternParser.cjs");function v(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t)return(t=t.call(e)).next.bind(t);if(Array.isArray(e)||(t=A(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A(e,r){if(e){if(typeof e=="string")return g(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return g(e,r)}}function g(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function O(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function y(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function C(e,r,t){return r&&y(e.prototype,r),t&&y(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}var M=function(){function e(r){O(this,e),this.matchTree=new b().parse(r)}return C(e,[{key:"match",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.allowOverflow;if(!t)throw new Error("String is required");var a=l(t.split(""),this.matchTree,!0);if(a&&a.match&&delete a.matchedChars,!(a&&a.overflow&&!i))return a}}]),e}();function l(e,r,t){if(typeof r=="string"){var n=e.join("");return r.indexOf(n)===0?e.length===r.length?{match:!0,matchedChars:e}:{partialMatch:!0}:n.indexOf(r)===0?t&&e.length>r.length?{overflow:!0}:{match:!0,matchedChars:e.slice(0,r.length)}:void 0}if(Array.isArray(r)){for(var i=e.slice(),a=0;a<r.length;){var d=r[a],f=l(i,d,t&&a===r.length-1);if(f){if(f.overflow)return f;if(f.match){if(i=i.slice(f.matchedChars.length),i.length===0)return a===r.length-1?{match:!0,matchedChars:e}:{partialMatch:!0}}else{if(f.partialMatch)return{partialMatch:!0};throw new Error(`Unsupported match result:
`.concat(JSON.stringify(f,null,2)))}}else return;a++}return t?{overflow:!0}:{match:!0,matchedChars:e.slice(0,e.length-i.length)}}switch(r.op){case"|":for(var o,w=v(r.args),h;!(h=w()).done;){var s=h.value,u=l(e,s,t);if(u){if(u.overflow)return u;if(u.match)return{match:!0,matchedChars:u.matchedChars};if(u.partialMatch)o=!0;else throw new Error(`Unsupported match result:
`.concat(JSON.stringify(u,null,2)))}}return o?{partialMatch:!0}:void 0;case"[]":for(var p=v(r.args),c;!(c=p()).done;){var m=c.value;if(e[0]===m)return e.length===1?{match:!0,matchedChars:e}:t?{overflow:!0}:{match:!0,matchedChars:[m]}}return;default:throw new Error("Unsupported instruction tree: ".concat(r))}}module.exports=M;
