"use client";"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const d=require("./helpers/matchesEntirely.cjs"),N=require("./helpers/formatNationalNumberUsingFormat.cjs"),O=require("./metadata.cjs"),m=require("./helpers/getIddPrefix.cjs"),v=require("./helpers/RFC3966.cjs");function h(r,n){var e=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(e)return(e=e.call(r)).next.bind(e);if(Array.isArray(r)||(e=A(r))||n&&r&&typeof r.length=="number"){e&&(r=e);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A(r,n){if(r){if(typeof r=="string")return l(r,n);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return l(r,n)}}function l(r,n){(n==null||n>r.length)&&(n=r.length);for(var e=0,t=new Array(n);e<n;e++)t[e]=r[e];return t}function s(r,n){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);n&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,t)}return e}function y(r){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?s(Object(e),!0).forEach(function(t){I(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):s(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))})}return r}function I(r,n,e){return n in r?Object.defineProperty(r,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[n]=e,r}var g={formatExtension:function(n,e,t){return"".concat(n).concat(t.ext()).concat(e)}};function P(r,n,e,t){if(e?e=y(y({},g),e):e=g,t=new O.default(t),r.country&&r.country!=="001"){if(!t.hasCountry(r.country))throw new Error("Unknown country: ".concat(r.country));t.country(r.country)}else if(r.countryCallingCode)t.selectNumberingPlan(r.countryCallingCode);else return r.phone||"";var o=t.countryCallingCode(),c=e.v2?r.nationalNumber:r.phone,a;switch(n){case"NATIONAL":return c?(a=i(c,r.carrierCode,"NATIONAL",t,e),f(a,r.ext,t,e.formatExtension)):"";case"INTERNATIONAL":return c?(a=i(c,null,"INTERNATIONAL",t,e),a="+".concat(o," ").concat(a),f(a,r.ext,t,e.formatExtension)):"+".concat(o);case"E.164":return"+".concat(o).concat(c);case"RFC3966":return v.formatRFC3966({number:"+".concat(o).concat(c),ext:r.ext});case"IDD":if(!e.fromCountry)return;var u=w(c,r.carrierCode,o,e.fromCountry,t);return f(u,r.ext,t,e.formatExtension);default:throw new Error('Unknown "format" argument passed to "formatNumber()": "'.concat(n,'"'))}}function i(r,n,e,t,o){var c=b(t.formats(),r);return c?N.default(r,c,{useInternationalFormat:e==="INTERNATIONAL",withNationalPrefix:!(c.nationalPrefixIsOptionalWhenFormattingInNationalFormat()&&o&&o.nationalPrefix===!1),carrierCode:n,metadata:t}):r}function b(r,n){for(var e=h(r),t;!(t=e()).done;){var o=t.value;if(o.leadingDigitsPatterns().length>0){var c=o.leadingDigitsPatterns()[o.leadingDigitsPatterns().length-1];if(n.search(c)!==0)continue}if(d(n,o.pattern()))return o}}function f(r,n,e,t){return n?t(r,n,e):r}function w(r,n,e,t,o){var c=O.getCountryCallingCode(t,o.metadata);if(c===e){var a=i(r,n,"NATIONAL",o);return e==="1"?e+" "+a:a}var u=m(t,void 0,o.metadata);if(u)return"".concat(u," ").concat(e," ").concat(i(r,null,"INTERNATIONAL",o))}exports.chooseFormatForNumber=b;exports.default=P;
