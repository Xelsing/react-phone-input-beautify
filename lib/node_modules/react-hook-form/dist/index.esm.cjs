"use client";"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const i=require("react");var P=e=>e.type==="checkbox",j=e=>e instanceof Date,O=e=>e==null;const B=e=>typeof e=="object";var g=e=>!O(e)&&!Array.isArray(e)&&B(e)&&!j(e),T=e=>g(e)&&e.target?P(e.target)?e.target.checked:e.target.value:e,R=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,U=(e,r)=>e.has(R(r)),D=e=>{const r=e.constructor&&e.constructor.prototype;return g(r)&&r.hasOwnProperty("isPrototypeOf")},W=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function v(e){let r;const t=Array.isArray(e);if(e instanceof Date)r=new Date(e);else if(e instanceof Set)r=new Set(e);else if(!(W&&(e instanceof Blob||e instanceof FileList))&&(t||g(e)))if(r=t?[]:{},!t&&!D(e))r=e;else for(const n in e)e.hasOwnProperty(n)&&(r[n]=v(e[n]));else return e;return r}var C=e=>Array.isArray(e)?e.filter(Boolean):[],h=e=>e===void 0,c=(e,r,t)=>{if(!r||!g(e))return t;const n=C(r.split(/[,[\].]+?/)).reduce((s,o)=>O(s)?s:s[o],e);return h(n)||n===e?h(e[r])?t:e[r]:n},S=e=>typeof e=="boolean";const A={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},m={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},L=i.createContext(null),_=()=>i.useContext(L);var I=(e,r,t,n=!0)=>{const s={defaultValues:r._defaultValues};for(const o in e)Object.defineProperty(s,o,{get:()=>{const l=o;return r._proxyFormState[l]!==m.all&&(r._proxyFormState[l]=!n||m.all),t&&(t[l]=!0),e[l]}});return s},H=e=>g(e)&&!Object.keys(e).length,M=(e,r,t,n)=>{t(e);const{name:s,...o}=e;return H(o)||Object.keys(o).length>=Object.keys(r).length||Object.keys(o).find(l=>r[l]===(!n||m.all))},N=e=>Array.isArray(e)?e:[e],F=(e,r,t)=>!e||!r||e===r||N(e).some(n=>n&&(t?n===r:n.startsWith(r)||r.startsWith(n)));function x(e){const r=i.useRef(e);r.current=e,i.useEffect(()=>{const t=!e.disabled&&r.current.subject&&r.current.subject.subscribe({next:r.current.next});return()=>{t&&t.unsubscribe()}},[e.disabled])}function k(e){const r=_(),{control:t=r.control,disabled:n,name:s,exact:o}=e||{},[l,f]=i.useState(t._formState),a=i.useRef(!0),d=i.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),u=i.useRef(s);return u.current=s,x({disabled:n,next:y=>a.current&&F(u.current,y.name,o)&&M(y,d.current,t._updateFormState)&&f({...t._formState,...y}),subject:t._subjects.state}),i.useEffect(()=>(a.current=!0,d.current.isValid&&t._updateValid(!0),()=>{a.current=!1}),[t]),I(l,t,d.current,!1)}var $=e=>typeof e=="string",q=(e,r,t,n,s)=>$(e)?(n&&r.watch.add(e),c(t,e,s)):Array.isArray(e)?e.map(o=>(n&&r.watch.add(o),c(t,o))):(n&&(r.watchAll=!0),t);function w(e){const r=_(),{control:t=r.control,name:n,defaultValue:s,disabled:o,exact:l}=e||{},f=i.useRef(n);f.current=n,x({disabled:o,subject:t._subjects.values,next:u=>{F(f.current,u.name,l)&&d(v(q(f.current,t._names,u.values||t._formValues,!1,s)))}});const[a,d]=i.useState(t._getWatch(n,s));return i.useEffect(()=>t._removeUnmounted()),a}var K=e=>/^\w*$/.test(e),z=e=>C(e.replace(/["|']|\]/g,"").split(/\.|\[/)),p=(e,r,t)=>{let n=-1;const s=K(r)?[r]:z(r),o=s.length,l=o-1;for(;++n<o;){const f=s[n];let a=t;if(n!==l){const d=e[f];a=g(d)||Array.isArray(d)?d:isNaN(+s[n+1])?{}:[]}e[f]=a,e=e[f]}return e};function G(e){const r=_(),{name:t,disabled:n,control:s=r.control,shouldUnregister:o}=e,l=U(s._names.array,t),f=w({control:s,name:t,defaultValue:c(s._formValues,t,c(s._defaultValues,t,e.defaultValue)),exact:!0}),a=k({control:s,name:t}),d=i.useRef(s.register(t,{...e.rules,value:f,...S(e.disabled)?{disabled:e.disabled}:{}}));return i.useEffect(()=>{const u=s._options.shouldUnregister||o,y=(b,E)=>{const V=c(s._fields,b);V&&(V._f.mount=E)};if(y(t,!0),u){const b=v(c(s._options.defaultValues,t));p(s._defaultValues,t,b),h(c(s._formValues,t))&&p(s._formValues,t,b)}return()=>{(l?u&&!s._state.action:u)?s.unregister(t):y(t,!1)}},[t,s,l,o]),i.useEffect(()=>{c(s._fields,t)&&s._updateDisabledField({disabled:n,fields:s._fields,name:t,value:c(s._fields,t)._f.value})},[n,t,s]),{field:{name:t,value:f,...S(n)||a.disabled?{disabled:a.disabled||n}:{},onChange:i.useCallback(u=>d.current.onChange({target:{value:T(u),name:t},type:A.CHANGE}),[t]),onBlur:i.useCallback(()=>d.current.onBlur({target:{value:c(s._formValues,t),name:t},type:A.BLUR}),[t,s]),ref:u=>{const y=c(s._fields,t);y&&u&&(y._f.ref={focus:()=>u.focus(),select:()=>u.select(),setCustomValidity:b=>u.setCustomValidity(b),reportValidity:()=>u.reportValidity()})}},formState:a,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!c(a.errors,t)},isDirty:{enumerable:!0,get:()=>!!c(a.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!c(a.touchedFields,t)},error:{enumerable:!0,get:()=>c(a.errors,t)}})}}exports.get=c;exports.set=p;exports.useController=G;exports.useFormContext=_;exports.useFormState=k;exports.useWatch=w;
